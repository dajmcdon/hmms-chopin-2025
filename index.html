<!DOCTYPE html>
<html lang="en-CA"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-29e2c20b02301cfff04dc8050bf30c7e.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.37">

  <meta name="author" content="Daniel J. McDonald">
  <title>index</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto-319301c0393bd92b907267d334af6dc1.css">
  <link rel="stylesheet" href="styling/tachyons-minimal.css">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="index_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
  <script src="index_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
  <script src="index_files/libs/d3-4.10.2/d3.min.js"></script>
  <link href="index_files/libs/collapsibleTree-0.1.6/collapsibleTree.css" rel="stylesheet">
  <script src="index_files/libs/collapsibleTree-binding-0.1.8/collapsibleTree.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">


<section id="section" class="slide level2 f1" data-background-image="gfx/cover-art-1.svg" data-background-opacity="0.4">
<h2>Markov-Switching Models for Musical Interpretation</h2>
<p><br></p>
<div class="flex">
<section id="daniel-j.-mcdonald" class="w-40">
<h4>Daniel J. McDonald</h4>
<p><br></p>
<p>HMM Symposium</p>
<p>20 February 2025</p>
</section>
<div class="w-60">
<div class="cell" data-layout-align="right" data-fig-valign="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="gfx/qrcodes-1.png" class="quarto-figure quarto-figure-right"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
<p><a href="https://dajmcdon.github.io/hmms-chopin-2025/" class="uri">https://dajmcdon.github.io/hmms-chopin-2025/</a></p>
</section>
<section id="section-1" class="slide level2" data-background-image="gfx/LoveLost-VPO.png" data-background-size="contain">
<h2></h2>
</section>
<section id="section-2" class="slide level2" data-background-image="gfx/State-cello-0299.jpg" data-background-size="contain">
<h2></h2>
</section>
<section id="section-3" class="slide level2" data-background-image="gfx/jacobs.jpg" data-background-size="contain">
<h2></h2>
<aside class="notes">
<ul>
<li>Dabbled in Economics</li>
<li>PhD is Statistics</li>
<li>IU happened to have an opening</li>
<li>Met Prof.&nbsp;Chris Raphael at my interview</li>
<li>Accepted the Job</li>
<li>Occasionally dabbled in Music on the Side</li>
<li>First invited talk at Laval on Music</li>
<li>Finally published the paper in 2021</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="musical-taste" class="slide level2">
<h2>Musical taste</h2>
<div class="flex">
<div class="w-60">
<ul>
<li>Easy to describe music you like:
<ul>
<li><p>“Jazzy sound”</p></li>
<li><p>“Strong beat”</p></li>
<li><p>“good lyrics”</p></li>
<li><p>“anything by Taylor Swift”</p></li>
</ul></li>
</ul>
</div>
<div class="w-40">
<iframe src="https://gifer.com/embed/22H" width="480" height="368.640" frameborder="0" allowfullscreen="">
</iframe>
</div>
</div>
<div class="fragment">
<ul>
<li><p>Harder to describe a <span class="tertiary">performance</span></p></li>
<li><p>Classical music is mainly about performances of the <span class="tertiary">same</span> music</p></li>
<li><p>How do we think about which ones we like?</p></li>
</ul>
</div>
</section>
<section id="primer-on-classical-music" class="slide level2">
<h2>Primer on “classical” music</h2>
<ul>
<li>Written between 6th century and today</li>
<li>Includes music written during the Classical period (1750–1820)</li>
</ul>
<div class="callout callout-warning no-icon callout-style-simple">
<div class="callout-body">
<div class="callout-content">
<p>The real difference is that when a composer writes a piece of what’s usually called classical music, he puts down the exact notes that he wants, the exact instruments or voices that he wants to play or sing those notes—even the exact number of instruments or voices; and he also writes down as many directions as he can think of.</p>
<p><span class="secondary">–Leonard Bernstein</span></p>
</div>
</div>
</div>
<p>Generally much more musically complicated</p>
<div class="tc">
<p><img src="gfx/hey-jude-single.jpeg" height="250"></p>
<audio controls="" src="gfx/hey-jude-clip.m4a">
</audio>
</div>
<aside class="notes">
<ul>
<li>Musically complicated = wider range of chords, keys, instrumentation, contrasts</li>
<li>Hey Jude: 3 chords (2 others briefly) in 7 minutes. Same key the whole time.</li>
<li>For today, Chopin is running example</li>
<li>Chopin: 6 unique chords in first 10 seconds. Two key areas in 1.5 minutes of music.</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section class="slide level2">

<div class="flex">
<div class="w-50 tc">
<p><img src="gfx/me.jpg" height="500px"></p>
<audio controls="" src="gfx/RubinsteinFlatTempo.m4a">
</audio>
</div>
<div class="w-50 tc">
<p><img src="gfx/rubin.jpg" height="500px"></p>
<audio controls="" src="gfx/Rubinstein.m4a">
</audio>
</div>
</div>
</section>
<section id="whats-different" class="slide level2">
<h2>What’s different?</h2>
<div class="flex">
<div class="w-50">
<ol type="1">
<li>Mistakes</li>
<li>Extraneous noise</li>
<li>Recording quality</li>
<li>Articulation / Legato / Bowing / Breathing</li>
<li>Dynamics</li>
<li>Tempo / Rubato</li>
</ol>
</div>
<div class="w-50">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://media.wbur.org/wp/2019/04/gustavo-dudamel.jpg"></p>
<figcaption>Source: WBUR Boston</figcaption>
</figure>
</div>
</div>
</div>
<aside class="notes">
<p>The first three are uninteresting.</p>
<p>The others are about <em>interpretation</em></p>
<p>We like performances with “better” interpretations</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section-4" class="slide level2" data-background-image="https://www.worldpianonews.com/wp-content/uploads/2020/05/Bosendorfer-280VC-custom4_Post-scaled.jpg" data-background-size="cover">
<h2></h2>
<aside class="notes">
<p>Piano music</p>
<ul>
<li>Simplifies the problem
<ul>
<li>No bowing, fingering, breathing, glissando</li>
</ul></li>
<li>Focus on <strong>tempo</strong></li>
<li>professional pianists would cringe as I say this, but contrast with strings / winds / singers</li>
<li>This is Drake’s Piano</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="musical-tempo" class="slide level2">
<h2>Musical tempo</h2>

<img data-src="gfx/rubinstein-tempo-1.svg" class="quarto-figure quarto-figure-center r-stretch"><ul>
<li><p>Notes change speed</p></li>
<li><p>Sometimes purposeful</p></li>
<li><p>Speed is important for <span class="tertiary">interpretation</span></p></li>
</ul>
<aside class="notes">
<ul>
<li>Orange is Rubinstein, as recorded</li>
<li>Dashed is “mine”, mechanically forced Rubinstein to be constant speed</li>
<li>Mention axes</li>
<li>Note the “slow down” at the end (phrase boundary)</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section>
<section id="what-is-this-music" class="title-slide slide level1 center">
<h1>What is this “music”?</h1>

</section>
<section id="important-musical-terms" class="slide level2">
<h2>Important musical terms</h2>
<p><img data-src="gfx/ChopinFirst3.jpeg" height="300"></p>
<div class="flex">
<div class="w-20 tr">
<p><span class="tertiary">Notes</span></p>
<p><span class="tertiary">Beat</span></p>
<p><span class="tertiary">Measure</span></p>
<p><span class="tertiary">Time signature</span></p>
<p><span class="tertiary">Tempo</span></p>
<p><span class="tertiary">Dynamics</span></p>
</div>
<div class="w-80">
<p>All those little black dots</p>
<p>Strongly felt impetus</p>
<p>Collections of notes delimited by vertical “barlines”</p>
<p>Number of beats / measure; type of note that gets the beat</p>
<p>The prevailing speed, measured in bpm</p>
<p>Loudness of the note</p>
</div>
</div>
<aside class="notes">
<ul>
<li>notes indicate pitch and relative duration</li>
<li>(relative to…) beat is the baseline</li>
<li>accents / pedal markings</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="data" class="slide level2">
<h2>Data</h2>
<ul>
<li>CHARM Mazurka Project</li>
</ul>
<p><img data-src="gfx/charm.png" height="300"></p>
<ul>
<li><p>Focus on timing only (dynamics also available)</p></li>
<li><p>50 recordings: Chopin Mazurka Op. 68 No.&nbsp;3</p></li>
<li><p>Recorded between 1931 and 2006</p></li>
<li><p>45 different performers</p></li>
</ul>
</section>
<section class="slide level2">


<img data-src="gfx/all-performance-lines-1.svg" class="quarto-figure quarto-figure-center r-stretch"><aside class="notes">
<ul>
<li>Note the shaded region</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="chopin-mazurkas" class="slide level2">
<h2>Chopin &amp; Mazurkas</h2>
<div class="flex">
<div class="w-50">
<p><span class="tertiary">Fryderyk Chopin (1810–1849)</span></p>
<ul>
<li><p>Born in Poland</p></li>
<li><p>Moved to Paris at 21</p></li>
<li><p>Virtuoso pianist</p></li>
<li><p>Wrote mainly piano music</p></li>
</ul>
</div>
<div class="w-50">
<p><span class="tertiary">Mazurka</span></p>
<ul>
<li><p>A Polish dance</p></li>
<li><p>Chopin composed at least 58 for Piano</p></li>
<li><p>Repetition is very important</p></li>
<li><p>Certain rhythmic figures</p></li>
</ul>
</div>
</div>

<img data-src="gfx/mazurka-dance.jpeg" class="quarto-figure quarto-figure-center r-stretch"><aside class="notes">
<p>Everything he wrote includes piano</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section-5" class="slide level2" data-background-image="gfx/entire-mazurka.jpg" data-background-size="contain">
<h2></h2>
<div class="tc">
<audio controls="" src="gfx/IMSLP365286-PMLP02288-Mazurka_F-Dur_Op_68_Nr_3.mp3">
</audio>
</div>
<aside class="notes">
<ul>
<li>Recording by Christoph Zbinden, available from the IMSLP under CC By 4.0.</li>
<li>Tempo markings, importantly, only 2 + rit and fermata</li>
<li>Dotted eighth sixteenth</li>
<li>ABA structure</li>
<li>Minor phrases</li>
<li>Repetition</li>
<li>Chord progression</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="modelling-tempo" class="title-slide slide level1 center">
<h1>Modelling tempo</h1>

</section>
<section id="tempo-regimes" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Tempo regimes</h2>
<div class="flex">
<div class="w-50">
<p><span class="const f1">1. Constant tempo</span></p>
<p><br></p>
<p><span class="accel f1">2. Accelerando (speeding up)</span></p>
<p><br></p>
<p><span class="decel f1">3. Ritarando (slowing down)</span></p>
<p><br></p>
<p><span class="stress f1">4. Tenuto (emphasis)</span></p>
</div>
<div class="w-50">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Metronome_Mälzel_1.jpg/291px-Metronome_Mälzel_1.jpg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="transition-diagram" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Transition diagram</h2>
<div class="flex">
<div class="w-60">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/markov-trans-small.svg" class="quarto-figure quarto-figure-center" width="800"></p>
</figure>
</div>
</div>
<div class="w-40">
<p><span class="const f1">1. Constant tempo</span></p>
<p><br></p>
<p><span class="accel f1">2. Accelerando (speeding up)</span></p>
<p><br></p>
<p><span class="decel f1">3. Ritarando (slowing down)</span></p>
<p><br></p>
<p><span class="stress f1">4. Tenuto (emphasis)</span></p>
</div>
</div>
<aside class="notes">
<ul>
<li>Can jump “right back”</li>
<li>What’s the difference between 1-3-1, 1-4-1?</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="transition-diagram-1" class="slide level2">
<h2>Transition diagram</h2>
<div class="flex">
<div class="w-60">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/markov-trans.svg" class="quarto-figure quarto-figure-center" width="800"></p>
</figure>
</div>
</div>
<div class="w-40">
<p><span class="const f1">1. Constant tempo</span></p>
<p><br></p>
<p><span class="accel f1">2. Accelerando (speeding up)</span></p>
<p><br></p>
<p><span class="decel f1">3. Ritarando (slowing down)</span></p>
<p><br></p>
<p><span class="stress f1">4. Tenuto (emphasis)</span></p>
<div class="fragment">
<p><br><br></p>
<ul>
<li>Before, <span class="math inline">\(|\mathcal{S}| = 4\)</span></li>
<li>Now, <span class="math inline">\(|\mathcal{S}| = 11\)</span></li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<ul>
<li>No longer 1-Markov</li>
<li>Any K-Markov can be made 1-Markov by expanding state-space</li>
<li>Now <span class="math inline">\(J=11\)</span> states</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-hmm" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">The HMM</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/hmm-flow.svg" class="quarto-figure quarto-figure-center" width="800"></p>
</figure>
</div>
<div class="fragment">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/hmm-2s-flow.svg" class="quarto-figure quarto-figure-center" width="800"></p>
</figure>
</div>
</div>
</section>
<section id="hmm-inference" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">HMM Inference</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/hmm-2s-flow.svg" class="quarto-figure quarto-figure-center" height="400"></p>
</figure>
</div>
<p><span class="tertiary">Viterbi</span> algorithm gives estimates of <span class="math inline">\(\{S_k\}\)</span></p>
<p>Computation is <span class="math inline">\(O(n)\)</span>: likelihood of <span class="math inline">\(p\)</span> and estimates of <span class="math inline">\(\{S_k\}\)</span></p>
<div class="fragment">
<p>Inside of EM (Baum-Welch) gives estimates of <span class="math inline">\(p\)</span></p>
</div>
</section>
<section id="section-6" class="slide level2">
<h2></h2>

<img data-src="gfx/richter-1.svg" class="quarto-figure quarto-figure-center r-stretch"><aside class="notes">
<ul>
<li>Not enough flexibility</li>
<li>Return to Constant needs <em>new tempo</em></li>
<li>“Noise around intended tempo” vs “Noise in intentions”</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="intentions-vs.-observations" class="slide level2">
<h2>Intentions vs.&nbsp;observations</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/ss-mod-flow.svg" class="quarto-figure quarto-figure-center" height="750"></p>
</figure>
</div>
<aside class="notes">
<ul>
<li>Musicians aren’t perfect.</li>
<li>Imagine a speed that they’ll maintain in CT state.</li>
<li>Accelerate/Decel from there.</li>
<li>Need to track tempo/accel in <span class="math inline">\(X_k\)</span>.</li>
<li>These depend on <span class="math inline">\(S_k\)</span> and <span class="math inline">\(S_{k-1}\)</span></li>
<li>Observe noisy realization</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section></section>
<section>
<section id="switching-kalman-filter" class="title-slide slide level1 center">
<h1>Switching Kalman filter</h1>

</section>
<section id="kalman-filter-algorithm" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Kalman filter algorithm</h2>
<div class="flex">
<div class="w-60">
<ul>
<li>Developed in the late 1950s to track missiles</li>
</ul>
<div data-id="kf-equation">
<p><span class="math display">\[
\begin{aligned}
X_{k+1} &amp;= d_k + T_k X_k + \eta_{k+1}, &amp; \eta_{k+1} &amp;\sim \textrm{N}(0, Q_{k+1}),\\
Y_k &amp;= c_k + Z_k X_k + \epsilon_{k}, &amp;\epsilon_k &amp; \sim \textrm{N}(0, G_k).\\
\end{aligned}
\]</span></p>
</div>
<ul>
<li><p>Assume <span class="math inline">\(X_0\)</span> is Gaussian</p></li>
<li><p>KF just tracks mean and variance of <span class="math inline">\(X_k\ |\ \{Y_i\}_{i=1}^k\)</span></p></li>
<li><p>Does this iteratively for each <span class="math inline">\(k\)</span></p></li>
<li><p><code>kfilter()</code> gives estimate of <span class="math inline">\(\{X_k\; |\; Y_1,\ldots,Y_k\}_{k=1}^n\)</span></p></li>
<li><p><code>kfilter()</code> also gives likelihood of <span class="math inline">\(\theta\)</span></p></li>
<li><p><code>ksmoother()</code> gives estimate of <span class="math inline">\(\{X_k\; |\; Y_1,\ldots,Y_n\}_{k=1}^n\)</span></p></li>
</ul>
</div>
<div class="w-40">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/ss-mod.svg" class="quarto-figure quarto-figure-center" width="500"></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iEmS3Tk.cj8U/v0/1400x-1.jpg" height="400"></p>
<figcaption>Photographer: Anas Baba/AFP/Getty Images</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="kalman-filter-inference" class="slide level2" data-auto-animate="true">
<h2 data-id="quarto-animate-title">Kalman filter inference</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/ss-mod.svg" class="quarto-figure quarto-figure-center" height="300"></p>
</figure>
</div>
<div data-id="kf-equation">
<p><span class="math display">\[
\begin{aligned}
X_{k+1} &amp;= {\color{Plum} d_k} + {\color{Plum} T_k} X_k + \eta_{k+1}, &amp; \eta_{k+1}
&amp;\sim \textrm{N}(0, {\color{Plum} Q_{k+1}}),\\
Y_k &amp;= {\color{Plum} c_k} + {\color{Plum} Z_k} X_k + \epsilon_{k}, &amp;\epsilon_k
&amp; \sim \textrm{N}(0, {\color{Plum} G_k}).\\
\end{aligned}
\]</span></p>
</div>
<p>Parameter matrices may depend on</p>
<ul>
<li>Parameter vector <span class="math inline">\(\theta\)</span></li>
<li>Current or previous values of <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span></li>
</ul>
</section>
<section id="kalman-filter-inference-1" class="slide level2">
<h2>Kalman filter inference</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/ss-mod.svg" class="quarto-figure quarto-figure-center" height="300"></p>
</figure>
</div>
<p><span class="math display">\[
\begin{aligned}
X_{k+1} &amp;= {\color{Plum} d_k} + {\color{Plum} T_k} X_k + \eta_{k+1}, &amp; \eta_{k+1}
&amp;\sim \textrm{N}(0, {\color{Plum} Q_{k+1}}),\\
Y_k &amp;= {\color{Plum} c_k} + {\color{Plum} Z_k} X_k + \epsilon_{k}, &amp;\epsilon_k
&amp; \sim \textrm{N}(0, {\color{Plum} G_k}).\\
\end{aligned}
\]</span></p>
<p><code>kfilter()</code> <span class="math inline">\(+\)</span> <code>ksmoother()</code> algorithms gives estimates of <span class="math inline">\(\{X_k\}\)</span></p>
<p>Computation is <span class="math inline">\(O(n)\)</span>: likelihood of <span class="math inline">\(\theta\)</span> and estimates of <span class="math inline">\(\{X_k\}\)</span></p>
<p>Inside of EM gives estimates of <span class="math inline">\(\theta\)</span></p>
</section>
<section id="switching-kalman-filter-for-our-model" class="slide level2">
<h2>Switching Kalman filter (for our model)</h2>
<p><br><br></p>
<div class="flex">
<div class="w-50">
<p><span class="math display">\[
\begin{aligned}
X_{k} &amp;= d(s_k,\ s_{k-1}) + T(s_k,\ s_{k-1}) X_{k-1} + \eta_{k}\\\\
Y_k &amp;= c(s_k) + Z(s_k) X_k + \epsilon_{k}\\\\
\eta_{k} &amp;\sim \textrm{N}(0, Q(s_k,\ s_{k-1}))\\\\
\epsilon_k &amp; \sim \textrm{N}(0, G(s_k))
\end{aligned}
\]</span></p>
</div>
<div class="w-50">
<p><img data-src="gfx/ss-mod-flow.svg"></p>
</div>
</div>
<div class="fragment">
<p><span class="tertiary">We want to estimate</span>: <span class="math inline">\(\theta\)</span>, <span class="math inline">\(p\)</span>, <span class="math inline">\(\{X_k\}\)</span>, and <span class="math inline">\(\{S_k\}\)</span></p>
</div>
<div class="fragment">
<p>This costs <span class="math inline">\(O(|\mathcal{S}|^n)\)</span>, <span class="math inline">\(|\mathcal{S}|=11\)</span>, <span class="math inline">\(n=231\)</span></p>
<aside class="notes">
<p>The problem is all the paths through the states</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</section>
<section id="we-dont-know-the-path-through-the-discrete-states" class="slide level2">
<h2>We don’t know the path through the discrete states</h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="collapsibleTree html-widget html-fill-item" id="htmlwidget-e13edd35ef6c6e8650b5" style="width:2400px;height:900px;"></div>
<script type="application/json" data-for="htmlwidget-e13edd35ef6c6e8650b5">{"x":{"data":{"name":"Constant tempo","fill":"#5E3C99","children":[{"name":"Speed up","fill":"#B2ABD2","children":[{"name":"Speed up","fill":"#B2ABD2","children":[{"name":"Speed up","fill":"#B2ABD2"},{"name":"Slow down","fill":"#FDB863"},{"name":"Constant tempo","fill":"#5E3C99"}]}]},{"name":"Slow down","fill":"#FDB863","children":[{"name":"Slow down","fill":"#FDB863","children":[{"name":"Slow down","fill":"#FDB863"},{"name":"Speed up","fill":"#B2ABD2"},{"name":"Constant tempo","fill":"#5E3C99"}]}]},{"name":"Constant tempo","fill":"#5E3C99","children":[{"name":"Constant tempo","fill":"#5E3C99","children":[{"name":"Stress","fill":"#E66101"},{"name":"Constant tempo","fill":"#5E3C99"},{"name":"Slow down","fill":"#FDB863"},{"name":"Speed up","fill":"#B2ABD2"}]},{"name":"Slow down","fill":"#FDB863","children":[{"name":"Slow down","fill":"#FDB863"}]},{"name":"Speed up","fill":"#B2ABD2","children":[{"name":"Speed up","fill":"#B2ABD2"}]},{"name":"Stress","fill":"#E66101","children":[{"name":"Constant tempo","fill":"#5E3C99"}]}]},{"name":"Stress","fill":"#E66101","children":[{"name":"Constant tempo","fill":"#5E3C99","children":[{"name":"Stress","fill":"#E66101"},{"name":"Constant tempo","fill":"#5E3C99"},{"name":"Speed up","fill":"#B2ABD2"},{"name":"Slow down","fill":"#FDB863"}]}]}]},"options":{"hierarchy":[1,2,3,4],"input":null,"attribute":"leafCount","linkLength":null,"fontSize":30,"tooltip":false,"collapsed":true,"zoomable":true,"margin":{"top":20,"bottom":20,"left":235,"right":235}}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<aside class="notes">
<ul>
<li>I have 4 states</li>
<li>2nd order Markov</li>
<li>Leads to 11 states in 1-Markov</li>
<li>Piece has 231 notes</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="discrete-particle-filter-dpf" class="slide level2">
<h2>Discrete particle filter — <code>dpf()</code></h2>
<ol type="1">
<li><p>Track at most <span class="math inline">\(J\)</span> paths through the <span class="math inline">\(|\mathcal{S}|^n\)</span> tree</p></li>
<li><p>At time <span class="math inline">\(k\)</span>, given <span class="math inline">\(J\)</span> paths, propagate each one forward</p></li>
<li><p>Sample the <span class="math inline">\(\approx J^2\)</span> possibilities to get only <span class="math inline">\(J\)</span></p></li>
<li><p>iterate forward through time until done</p></li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="collapsibleTree html-widget html-fill-item" id="htmlwidget-5ff729544377a714b477" style="width:2400px;height:700px;"></div>
<script type="application/json" data-for="htmlwidget-5ff729544377a714b477">{"x":{"data":{"name":"Constant tempo","fill":"#5E3C99","children":[{"name":"Speed up","fill":"#B2ABD2","children":[{"name":"Speed up","fill":"#B2ABD2","children":[{"name":"Speed up","fill":"#B2ABD2"},{"name":"Slow down","fill":"#FDB863"},{"name":"Constant tempo","fill":"#5E3C99"}]}]},{"name":"Slow down","fill":"#FDB863","children":[{"name":"Slow down","fill":"#FDB863","children":[{"name":"Slow down","fill":"#FDB863"},{"name":"Speed up","fill":"#B2ABD2"},{"name":"Constant tempo","fill":"#5E3C99"}]}]},{"name":"Constant tempo","fill":"#5E3C99","children":[{"name":"Constant tempo","fill":"#5E3C99","children":[{"name":"Stress","fill":"#E66101"},{"name":"Constant tempo","fill":"#5E3C99"},{"name":"Slow down","fill":"#FDB863"},{"name":"Speed up","fill":"#B2ABD2"}]},{"name":"Slow down","fill":"#FDB863","children":[{"name":"Slow down","fill":"#FDB863"}]},{"name":"Speed up","fill":"#B2ABD2","children":[{"name":"Speed up","fill":"#B2ABD2"}]},{"name":"Stress","fill":"#E66101","children":[{"name":"Constant tempo","fill":"#5E3C99"}]}]},{"name":"Stress","fill":"#E66101","children":[{"name":"Constant tempo","fill":"#5E3C99","children":[{"name":"Stress","fill":"#E66101"},{"name":"Constant tempo","fill":"#5E3C99"},{"name":"Speed up","fill":"#B2ABD2"},{"name":"Slow down","fill":"#FDB863"}]}]}]},"options":{"hierarchy":[1,2,3,4],"input":null,"attribute":"leafCount","linkLength":null,"fontSize":30,"tooltip":false,"collapsed":true,"zoomable":true,"margin":{"top":20,"bottom":20,"left":235,"right":235}}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<aside class="notes">
<ul>
<li>This is a greedy approximation</li>
<li>AKA “Beam Search”</li>
<li>The sampling step is important</li>
<li>Probability of sampling is proportional to current weight <span class="math inline">\(\times\)</span> likelihood <span class="math inline">\(\times\)</span> trans prob</li>
<li>Example supposing <span class="math inline">\(J = 5\)</span></li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="the-complete-pseudocode" class="slide level2">
<h2>The complete pseudocode</h2>
<p>For each performance:</p>
<ul>
<li>Iterate 1–3 to maximize for <span class="math inline">\(\theta \in \Theta\)</span>, produce <span class="math inline">\(\widehat\theta\)</span>
<ol type="1">
<li>Guess a parameter vector <span class="math inline">\(\theta\)</span> (in some sensible way)</li>
<li><code>dpf()</code> gives greedy state sequence <span class="math inline">\(\{\widehat{S}_k\}_{k=1}^n\)</span></li>
<li>It gives the likelihood as a side effect via <code>kfilter()</code></li>
</ol></li>
<li>Rerun <code>dpf()</code> and <code>ksmoother()</code> at <span class="math inline">\(\widehat{\theta}\)</span> to get <span class="math inline">\(\{\widehat{S}_k\}_{k=1}^n\)</span> and <span class="math inline">\(\{\widehat{X}_k\}_{k=1}^n\)</span></li>
</ul>
<div class="fragment">
<p><img data-src="https://alliancecan.ca/themes/custom/site_theme/logo.svg"></p>
</div>
<aside class="notes">
<ul>
<li>Takes a few minutes per performance when 1 is done intelligently</li>
<li>I used 6hr walltime on Cedar with 1 perf / core and 10 restarts</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="section-7" class="slide level2">
<h2></h2>

<img data-src="gfx/two-perfs-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section></section>
<section>
<section id="similar-performances" class="title-slide slide level1 center">
<h1>Similar performances</h1>

</section>
<section id="the-estimated-parameters" class="slide level2">
<h2>The estimated parameters</h2>
<p>For each performance, we estimate <span class="math inline">\(p\)</span> and <span class="math inline">\(\theta\)</span> by penalized maximum likelihood.</p>
<p>Abuse notation and redefine <span class="math inline">\(\theta := (p, \theta)\)</span></p>
<ul>
<li><p>average speed in different states</p></li>
<li><p>some variance parameters</p></li>
<li><p>transition probabilities</p></li>
</ul>
<p>We have strong prior information.</p>
<aside class="notes">
<p>Examples of strong priors</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="distance-matrix-on-parameters" class="slide level2">
<h2>Distance matrix on parameters</h2>
<div class="flex">
<div class="w-50">
<ul>
<li><p>Use Mahalanobis <span class="math display">\[d(\theta,\theta') = \sqrt{(\theta-\theta')^\mathsf{T} \mathbf{V}^{-1}(\theta-\theta')}\]</span></p></li>
<li><p><span class="math inline">\(\mathbf{V}\)</span> is prior covariance matrix</p></li>
<li><p>Incorporates correlations correctly on probability vectors</p></li>
<li><p>Some performances have no “close” neighbors</p></li>
</ul>
</div>
<div class="w-50">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/parametric-clusters-1.png" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-8" class="slide level2">
<h2></h2>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/good-clusters.png" class="quarto-figure quarto-figure-center" width="941" height="800"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="section-9" class="slide level2">
<h2></h2>

<img data-src="gfx/clustered-parameters-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="probability-of-stress" class="slide level2">
<h2>Probability of “stress”</h2>

<img data-src="gfx/clustered-p14-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="cluster-1" class="slide level2">
<h2>Cluster 1</h2>

<img data-src="gfx/clust-1-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="cluster-2" class="slide level2">
<h2>Cluster 2</h2>

<img data-src="gfx/clust-2-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="similar-performances-1" class="slide level2">
<h2>Similar performances</h2>

<img data-src="gfx/similar-perfs-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="arthur-rubinstein" class="slide level2">
<h2>Arthur Rubinstein</h2>

<img data-src="gfx/rubinstein-perfs-1.svg" class="quarto-figure quarto-figure-center r-stretch"></section>
<section id="cortot" class="slide level2">
<h2>Cortot?</h2>

<img data-src="gfx/cortot-performance-1.svg" class="quarto-figure quarto-figure-center r-stretch"><aside class="notes">
<ul>
<li>Not actually Cortot</li>
<li>Likely Hatto or perhaps even an engineered recording</li>
<li>This was a major scandal for the British Concert Artist record label in about 2006/7</li>
<li>about 100 other fake recordings</li>
<li>Discovered by uploading to Gracenote database</li>
</ul>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="in-summary" class="slide level2">
<h2>In summary</h2>
<ul>
<li><p>We develop a switching model for tempo decisions</p></li>
<li><p>We give an algorithm for performing likelihood inference</p></li>
<li><p>We estimate our model using a large collection of recordings of the same composition</p></li>
<li><p>We demonstrate how the model is able to recover performer intentions</p></li>
<li><p>We use the learned representations to compare and contrast recordings</p></li>
</ul>
<div class="fragment">
<h3 id="future-work">Future work</h3>
<ul>
<li><p>Similar model for dynamics</p></li>
<li><p>Can we do this fast and “online”?</p></li>
<li><p>Use it for teaching?</p></li>
</ul>
</div>
</section>
<section id="collaborators-funding-etc." class="slide level2">
<h2>Collaborators, funding, etc.</h2>
<div class="flex">
<div class="w-50">
<div>

</div>
<div class="quarto-layout-panel" data-layout="[[50,50], [-25,50,-25]]">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/craphael.jpg" width="250"></p>
<figcaption>Christopher Raphael</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/mmcbride.jpg" width="250"></p>
<figcaption>Michael McBride</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="gfx/rob_granger.jpg" width="250"></p>
<figcaption>Rob Granger</figcaption>
</figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
</div>
</div>
</div>
<div class="w-50">
<iframe width="600" height="300" src="https://www.youtube.com/embed/W8RTpOe-AqA?start=68" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" align="center" caption="Yupeng Gu">
</iframe>
<p><br></p>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[40,60]">
<div class="quarto-layout-row quarto-layout-valign-center">
<div class="quarto-layout-cell" style="flex-basis: 40.0%;justify-content: center;">
<p><img data-src="gfx/nsf-logo.png" width="200"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 60.0%;justify-content: center;">
<p><img data-src="https://www.nserc-crsng.gc.ca/img/logos/img-logo2-en.png" width="300"></p>
</div>
</div>
</div>
</div>
</div>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">
<p>Markov Models for Music — dajmcdon/hmms-chopin-2025</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease-in-out",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
              // target, if specified
              link.setAttribute("target", "_blank");
              if (link.getAttribute("rel") === null) {
                link.setAttribute("rel", "noopener");
              }
              // default icon
              link.classList.add("external");
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>